<div class="community-container bg-[#f4f4f4] dark:bg-black transition-colors min-h-screen">

  <h2 class="heading text-[#333] dark:text-gray-200 transition-colors">Community Experiences</h2>


  <div class="post-card bg-white dark:bg-[#1f1f1f] dark:border-gray-700 transition-colors shadow-sm hover:shadow-md"
    *ngFor="let post of posts">
    <div class="user-info border-b border-gray-200 dark:border-gray-700 pb-3 mb-3">

      <h3 class="text-[#d84e55] dark:text-red-400 font-bold text-base m-0">User: {{post.userId?.name || 'Anonymous'}}
      </h3>
      <span
        class="route bg-[#f0f0f0] dark:bg-gray-700 text-[#666] dark:text-gray-300 px-2 py-1 rounded text-xs">{{post.source}}
        ➔ {{post.destination}}</span>
      <p class="bus-name text-gray-600 dark:text-gray-400 text-sm" *ngIf="post.busName"><strong>Bus:</strong>
        {{post.busName}}</p>

    </div>
    <div class="rating">
      <span *ngFor="let star of [1,2,3,4,5]" [class.filled]="star <= post.rating">★</span>
    </div>
    <div class="post-content">
      <p class="text-[#444] dark:text-gray-300 leading-relaxed">{{post.story}}</p>

      <div class="photos" *ngIf="post.photos && post.photos.length > 0">
        <img *ngFor="let photo of post.photos" [src]="baseUrl + photo" alt="Trip photo"
          (error)="handleImageError($event)">
      </div>
    </div>
    <div class="post-footer border-t border-dashed border-gray-200 dark:border-gray-700 mt-4 pt-4">
      <button
        class="like-btn bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-600 dark:text-white rounded-full px-4 py-2 flex items-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-600 transition-all font-semibold"
        (click)="toggleLike(post)">

        <span class="heart">♥</span> {{post.likesCount || 0}} Likes
      </button>
    </div>
  </div>
</div>